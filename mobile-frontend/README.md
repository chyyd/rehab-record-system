# 康复治疗记录系统 - 手机端

基于 uni-app + Vue3 开发的跨平台移动应用，用于医护人员进行康复治疗记录。

## 技术栈

- **框架**: uni-app (Vue3 + TypeScript)
- **状态管理**: Pinia
- **UI**: 自定义组件
- **平台支持**:
  - H5 (浏览器)
  - 微信小程序
  - App (Android/iOS)

## 功能特性

### 已实现功能 ✅

1. **用户认证**
   - 登录/登出
   - Token持久化
   - 基于角色的权限控制

2. **工作台**
   - 今日统计展示
   - 快捷功能入口
   - 待办任务列表
   - 扫码定位患者

3. **患者管理**
   - 患者列表
   - 智能搜索（姓名/拼音/病历号后3位）
   - 患者详情查看

4. **治疗记录**
   - 极简记录流程
   - 基于角色的项目过滤
   - 自动计算治疗时长
   - 患者反应快速选择
   - 治疗照片拍摄
   - 自动生成文件名

## 项目结构

```
mobile-frontend/
├── pages/                  # 页面
│   ├── login/             # 登录页
│   │   └── login.vue
│   ├── home/              # 工作台
│   │   └── home.vue
│   ├── patients/          # 患者管理
│   │   ├── list.vue       # 患者列表
│   │   └── detail.vue     # 患者详情
│   └── record/            # 治疗记录
│       ├── create.vue     # 创建记录
│       ├── detail.vue     # 记录详情
│       └── history.vue    # 历史记录
├── stores/                # 状态管理
│   └── user.ts            # 用户store
├── types/                 # 类型定义
│   └── user.ts            # 用户类型
├── static/                # 静态资源
│   └── styles/            # 全局样式
│       └── global.scss
├── App.vue                # 应用入口
├── main.ts                # 主文件
├── manifest.json          # 应用配置
├── pages.json             # 页面配置
└── package.json           # 依赖配置
```

## 开发指南

### 安装依赖

```bash
cd mobile-frontend
npm install
```

### 运行项目

```bash
# H5
npm run dev:h5

# 微信小程序
npm run dev:mp-weixin

# App
npm run dev:app
```

### 构建项目

```bash
# H5
npm run build:h5

# 微信小程序
npm run build:mp-weixin

# App
npm run build:app
```

## API 配置

API地址配置在 `stores/user.ts`:

```typescript
const API_BASE = 'http://localhost:3000'
```

生产环境请修改为实际的服务器地址。

## 测试账号

```
管理员   - admin / 123456
医师     - doc001 / 123456
护士     - nurse001 / 123456
治疗师   - therapist001 / 123456
```

## 核心功能说明

### 1. 智能搜索

支持三种搜索方式:
- 拼音首字母: `wjg` → 王建国
- 病历号后3位: `321` → 150321
- 姓名: `王建国` → 王建国

### 2. 治疗记录创建流程

1. 选择患者
2. 选择治疗项目（根据角色过滤）
3. 点击"开始治疗" → 记录开始时间
4. 等待治疗完成（实时计时）
5. 点击"结束治疗" → 自动计算结束时间
6. 选择患者反应（快速选择）
7. 拍照记录（可选）
8. 保存记录

### 3. 自动计算功能

- **结束时间** = 开始时间 + 默认时长 + 随机秒数(60-120)
- **照片文件名** = 病案号_序号.jpg
- **默认反应** = "无不良反应"

## 待开发功能

- [ ] 患者详情页
- [ ] 记录详情页
- [ ] 历史记录页
- [ ] 康复评估功能
- [ ] 图标字体集成
- [ ] 主题定制

## 注意事项

1. **图标字体**: 当前使用占位符，需要替换为实际的iconfont
2. **图片资源**: 需要添加logo、头像、空状态图等静态资源
3. **API地址**: 开发环境使用localhost，生产环境需修改
4. **权限控制**: 基于用户角色过滤可操作项目
5. **数据持久化**: Token和用户信息存储在本地

## 技术亮点

1. **TypeScript支持**: 完整的类型定义
2. **Composition API**: Vue3新特性
3. **Pinia状态管理**: 轻量级、类型安全
4. **极简交互**: 最小化输入步骤
5. **自动计算**: 减少手动输入
6. **角色过滤**: 基于权限的功能控制

## 常见问题

### Q: 如何修改API地址?
A: 修改 `stores/user.ts` 中的 `API_BASE` 常量

### Q: 如何添加新的图标?
A: 使用iconfont工具生成字体文件，替换图标占位符

### Q: 如何自定义主题色?
A: 修改 `static/styles/global.scss` 中的颜色变量

### Q: 打包后无法请求数据?
A: 检查域名白名单配置（manifest.json）

## 开发建议

1. 使用Chrome DevTools调试H5版本
2. 使用微信开发者工具调试小程序版本
3. 真机调试前确保网络环境配置正确
4. 定期清理缓存避免问题

---

**开发团队**: Rehab System Team
**更新日期**: 2026年1月10日
