# 快速启动指南

## 🚀 一键启动 (推荐)

### Windows用户

**方式1: 双击运行**
```
双击 run.bat 文件
```

**方式2: PowerShell脚本**
```powershell
右键点击 启动服务.ps1
选择 "使用 PowerShell 运行"
```

启动后，后端服务器将运行在 **http://localhost:3000**

---

## 📱 三端访问

### 1. 后端API (必须先启动)

**启动命令**:
```bash
cd backend
npm install
npm run prisma:generate
npx prisma migrate dev --name init
npm run prisma:seed
npm run start:dev
```

**访问地址**:
- API服务器: http://localhost:3000
- API文档: http://localhost:3000/api-docs

### 2. 手机端 H5

**启动命令**:
```bash
cd mobile-frontend
npm install
npm run dev:h5
```

**访问地址**: http://localhost:8081 (默认)

### 3. Web管理后台

**启动命令**:
```bash
cd web-admin
npm install
npm run dev
```

**访问地址**: http://localhost:8080

---

## 👤 测试账号

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| 管理员 | admin | 123456 | 全部功能 |
| 医师 | doc001 | 123456 | 评估、治疗 |
| 护士 | nurse001 | 123456 | 治疗 |
| 治疗师 | therapist001 | 123456 | 治疗 |

---

## ⚡ 快速测试流程

### 测试1: 智能搜索 (后端)

1. 打开 API文档: http://localhost:3000/api-docs
2. 点击 `POST /auth/login`
3. 输入:
   ```json
   {
     "username": "admin",
     "password": "123456"
   }
   ```
4. 复制返回的 `access_token`
5. 点击 `GET /patients/search?q=321`
6. 点击 "Authorize" 输入 `Bearer <token>`
7. 执行请求 → 应该返回患者"王建国"

### 测试2: 创建记录 (手机端)

1. 打开手机端: http://localhost:8081
2. 登录: therapist001 / 123456
3. 点击"患者" → 选择任意患者 → 点击"创建记录"
4. 选择项目 → 点击"开始治疗" → 等待几秒
5. 点击"结束治疗" → 选择"无不良反应" → 点击"保存记录"

### 测试3: 管理后台 (Web)

1. 打开Web后台: http://localhost:8080
2. 点击测试账号快速登录
3. 查看"仪表盘"统计数据
4. 进入"患者管理"添加新患者
5. 进入"项目管理"查看项目配置
6. 进入"统计报表"查看统计数据

---

## 📋 功能清单

### ✅ 已完成功能

**后端API** (http://localhost:3000)
- ✅ 用户登录认证
- ✅ 患者智能搜索
- ✅ 治疗记录CRUD
- ✅ 项目权限管理
- ✅ 统计报表数据

**手机端** (http://localhost:8081)
- ✅ 用户登录
- ✅ 工作台统计
- ✅ 患者列表搜索
- ✅ 创建治疗记录
- ✅ 实时治疗计时

**Web后台** (http://localhost:8080)
- ✅ 管理员登录
- ✅ 数据统计仪表盘
- ✅ 患者增删改查
- ✅ 项目配置管理
- ✅ 记录查询管理
- ✅ 用户权限管理
- ✅ 统计报表展示

**打印模板** (print-templates/)
- ✅ 康复治疗记录单
- ✅ 治疗师工作量报表

---

## ❓ 常见问题

### Q: 后端启动失败?
A:
1. 确保已安装 Node.js (v18+)
2. 运行 `npm install` 安装依赖
3. 检查端口 3000 是否被占用
4. 运行 `npm run prisma:generate` 重新生成 Prisma 客户端

### Q: 手机端无法访问API?
A:
1. 确保后端已启动 (http://localhost:3000)
2. 检查手机端 API_BASE 配置
3. 查看浏览器控制台错误信息

### Q: Web后台登录后显示空白?
A:
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 错误信息
3. 确保后端API正常运行

### Q: 数据库连接失败?
A:
1. 删除 `backend/data/database.db`
2. 运行 `npx prisma migrate dev --name init`
3. 运行 `npm run prisma:seed` 重新初始化数据

---

## 🎯 下一步

1. **功能测试**: 使用测试账号完整测试所有功能
2. **数据录入**: 录入真实的患者和项目数据
3. **人员培训**: 培训医护人员使用系统
4. **试运行**: 小范围试用运行
5. **反馈优化**: 根据反馈进行优化

---

## 📚 更多文档

- `后端测试报告.md` - 详细的API测试报告
- `mobile-frontend/README.md` - 手机端开发文档
- `web-admin/README.md` - Web后台开发文档
- `print-templates/README.md` - 打印模板使用说明
- `项目最终总结.md` - 完整项目总结

---

**祝使用愉快！** 🎉
